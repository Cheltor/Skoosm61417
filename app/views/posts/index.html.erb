<div class="subscribe-line subscribe-line-default">
   <div class="container" style="padding-top:30px">
      <h2>Search all posts:</h2>
      <div class="row">
           <div class="col-md-9">
            <%= search_form_for @search, defaults: {wrapper: :inline_field4} do |f| %>
              <form class="">
                   <div class="form-group">
                    <%= f.text_field :title_or_content_or_comments_content_cont, placeholder: 'Type here', class: "form-control" %>
                   </div>
               </form>
           </div>
           <div class="col-md-3">
              <%= f.submit "Search", class: "btn btn-info btn-block" %>
           </div>
           <% end %>
      </div>
   </div>
</div>
<div class="table-responsive">
    <table class="table">
          <thead>
            <tr>
              <th></th>
              <th style="text-align: center">Title</th>
              <th style="text-align: center">Course</th>
              <th style="text-align: center">University</th>
              <th style="text-align: center">User(karma)</th>
              <th style="text-align: center">Post Karma</th>
              <th style="text-align: center">Like</th>
              <th style="text-align: center">Dislike</th>
              <th style="text-align: center">Time created</th>
            </tr>
          </thead>
          <tbody>
            <% @posts.each do |post| %>
              <tr>
                <td style="text-align: center"><%= link_to 'Show', post, :class => 'btn btn-info' %></td>
                <td style="text-align: center"><%= post.title %></td>
                <td style="text-align: center"><%= post.course.name %></td>
                <td style="text-align: center"><%= post.course.university.name %></td>
                <% if post.user.blank? %>
                    <td style="text-align: center">User Deleted</td>
                    <td style="text-align: center">N/A</td>
                    <td style="text-align: center">N/A</td>
                    <td style="text-align: center">N/A</td>
                  <% else %>
                    <td style="text-align: center"><%= post.user.email %>(<%= post.user.try(:karma) %>)</td>
                    <td style="text-align: center"><%= post.get_upvotes.size %> - <%= post.get_downvotes.size %> = <%= post.weighted_score %> </td>
                    <td class="td-actions text-center"><%= link_to like_post_path(post), method: :put do %>
                      <span class="pe-7s-up-arrow" style="font-size: 20pt"></span><% end %></td>
                    <td class="td-actions text-center"><%= link_to dislike_post_path(post), method: :put do %>
                      <span class="pe-7s-bottom-arrow" style="font-size: 20pt"></span><% end %></td>
                <% end %>
                <td style="text-align: center"><%= time_ago_in_words(post.created_at) + " ago" %></td>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>



<p id="notice"><%= notice %></p>
<% else %>
<nav class="navbar navbar-ct-azure navbar-fixed-top" role="navigation">
    <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button id="menu-toggle" type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar bar1"></span>
        <span class="icon-bar bar2"></span>
        <span class="icon-bar bar3"></span>
      </button>
      <a class="navbar-brand" href="#">Skoosm</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
            <li><%= link_to 'New Post', new_post_path, class: "btn btn-round btn-default" %></li>
            <li><a href="#" class="btn btn-round btn-default">Sign in</a></li>
            <li><a href="#" class="btn btn-round btn-default">Sign up</a></li>
       </ul>
      
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="section section-description">
       <div class="container">
          <p>All Posts</p>
       </div>
</div><!-- section -->
<div class="subscribe-line subscribe-line-default">
   <div class="container">
      <h2>Search all posts:</h2>
      <div class="row">
           <div class="col-md-9">
            <%= search_form_for @search, defaults: {wrapper: :inline_field4} do |f| %>
              <form class="">
                   <div class="form-group">
                    <%= f.text_field :title_or_content_or_comments_content_cont, placeholder: 'Type here', class: "form-control" %>
                   </div>
               </form>
           </div>
           <div class="col-md-3">
              <%= f.submit "Search", class: "btn btn-info btn-fill btn-block" %>
           </div>
           <% end %>
      </div>
   </div>
</div>
<div class="table-responsive">
    <table class="table">
          <thead>
            <tr>
              <th style="text-align: center">Title</th>
              <th style="text-align: center">Url</th>
              <th style="text-align: center">Content</th>
              <th style="text-align: center">Course</th>
              <th style="text-align: center">Subject</th>
              <th style="text-align: center">User</th>
              <th style="text-align: center">User Karma</th>
              <th style="text-align: center">Like</th>
              <th style="text-align: center">Dislike</th>
              <th style="text-align: center">Time created</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @posts.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.url %></td>
                <td><%= post.content %></td>
                <td><%= post.course.name %></td>
                <td><%= post.course.subject.name %></td>
                <% if post.user.blank? %>
                    <td>User Deleted</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                  <% else %>
                    <td><%= post.user.email %></td>
                    <td><%= post.user.try(:karma) %></td>
                    <td><%= link_to like_post_path(post), method: :put, class: "btn btn-default btn-sm" do %>
                      <span class="pe-7s-angle-up"></span><% end %>
                      <%= post.get_upvotes.size %></td>

                    <td><%= link_to dislike_post_path(post), method: :put, class: "btn btn-default btn-sm" do %>
                      <span class="pe-7s-angle-down"></span><% end %><%= post.get_downvotes.size %></td>
                <% end %>
                <td><%= time_ago_in_words(post.created_at) + " ago" %></td>
                <td><%= link_to 'Show', post, :class => 'btn btn-primary' %></td>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>



<p id="notice"><%= notice %></p>